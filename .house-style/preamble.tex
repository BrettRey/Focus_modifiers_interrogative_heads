% !TEX TS-program = xelatex
% File: preamble.tex
% Purpose: Brett Reynolds house style LaTeX preamble
% Version: 1.0.0
%
% Usage: \input{.house-style/preamble.tex} in main document

% --- Layout & language ---
\usepackage[margin=1in]{geometry}
\usepackage[british]{babel}            % British conventions; use -ize spellings in prose
\usepackage{fontspec}                  % Xe/LuaLaTeX
\providecommand{\HouseMainFont}{Charis SIL}
% Optional: set \HouseMainFontPath (with trailing slash) before \input{.house-style/preamble.tex}
\providecommand{\HouseMainFontPath}{}
\newcommand{\HouseMainFontFile}{CharisSIL-Regular.ttf}
\ifx\HouseMainFontPath\empty
  \IfFontExistsTF{\HouseMainFont}{%
    \setmainfont{\HouseMainFont}[SmallCapsFeatures={Letters=SmallCaps}]%
  }{%
    \setmainfont{Times New Roman}%
  }%
\else
  \IfFileExists{\HouseMainFontPath\HouseMainFontFile}{%
    \setmainfont{Charis SIL}[%
      Path=\HouseMainFontPath,
      UprightFont=CharisSIL-Regular.ttf,
      ItalicFont=CharisSIL-Italic.ttf,
      BoldFont=CharisSIL-Bold.ttf,
      BoldItalicFont=CharisSIL-BoldItalic.ttf,
      SmallCapsFeatures={Letters=SmallCaps}%
    ]%
  }{%
    \IfFontExistsTF{\HouseMainFont}{%
      \setmainfont{\HouseMainFont}[SmallCapsFeatures={Letters=SmallCaps}]%
    }{%
      \setmainfont{Times New Roman}%
    }%
  }%
\fi
\usepackage[final,nopatch=footnote]{microtype}
\usepackage{marvosym}                  % \Cross symbol for cross-linguistic subscripts

% --- Quotation marks ---
\usepackage{csquotes}                  % \enquote{â€¦} with locale-aware quoting
\usepackage{orcidlink}

% --- Hyperlinks ---
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  citecolor=blue,
  urlcolor=blue,
  pdfauthor={Brett Reynolds}
  % pdftitle will be set in main document
}

% --- Maths and symbols ---
\usepackage{amsmath,amssymb}

% --- Numbered linguistic examples (LangSci/gb4e wrapper, no 'exe' env) ---
\usepackage{langsci-gb4e}
\makeatletter
\@ifundefined{noautomath}{}{\noautomath}
\makeatother

% --- Lists & small utilities ---
\usepackage{enumitem}
\setlist{itemsep=0.3\baselineskip, topsep=0.3\baselineskip}
\usepackage{xspace}

% =========================
% Bibliography (biblatex)
% =========================
% Default portable setup:
\usepackage[backend=biber,style=apa,natbib=true,doi=true,isbn=false,url=true]{biblatex}
\addbibresource{references.bib}

% If working in LangSci projects, you can switch to their unified style:
% \usepackage[backend=biber,style=unified,natbib=true,doi=true,isbn=false,url=false]{biblatex}

% =========================
% Light house macros
% =========================
% Mention (italics) for metalinguistic use
\newcommand{\mention}[1]{\textit{#1}}

% Term (small caps) for terminology being defined
\newcommand{\term}[1]{\textsc{#1}}

% Small-caps abbreviations for glosses
\newcommand{\abbr}[1]{\textsc{#1}}

% Cross-linguistic subscript marker (e.g., \textsc{subject}\crossmark)
\newcommand{\crossmark}{\textsubscript{\Cross}}

% Judgement markers
\newcommand{\ungram}[1]{*\!#1}
\newcommand{\marg}[1]{?\!#1}
\newcommand{\odd}[1]{\#\!#1}

% e.g., i.e., etc., with sensible spacing
\newcommand{\eg}{e.g.,\xspace}
\newcommand{\ie}{i.e.,\xspace}
\newcommand{\etc}{etc.\xspace}
